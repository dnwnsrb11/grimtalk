server {
    listen 80;
    server_name localhost;

    # React/Vue 빌드 파일들이 위치한 디렉토리 지정
    root /usr/share/nginx/html;
    # 기본으로 제공할 파일 지정
    index index.html;

    # 👇 SPA 라우팅을 위한 핵심 설정
    location / {
        # try_files 지시어는 다음 순서로 파일을 찾음:
        # 1. $uri : 요청된 URL과 정확히 일치하는 파일 찾기 (예: /about)
        # 2. $uri/ : 요청된 URL과 일치하는 디렉토리 찾기 (예: /about/)
        # 3. /index.html : 위 둘 다 없으면 index.html로 폴백(fallback)
        #
        # 예시:
        # /about 접속 시 → about 파일 없음 → about/ 디렉토리 없음 → index.html 제공
        # → React/Vue가 클라이언트에서 라우팅 처리
        try_files $uri $uri/ /index.html;
    }

    # 👇 404 에러 처리 (위의 try_files와 함께 동작)
    # 다른 모든 HTTP 에러도 index.html로 리다이렉트하려면 아래처럼 설정
    error_page 404 =200 /index.html;
    # =200은 404 대신 200 상태코드를 반환하도록 함
    # 이렇게 하면 브라우저에서 404 에러 대신 정상 응답으로 처리
}