server {
    listen 443 ssl;
    server_name i12d202.p.ssafy.io;

      # âœ… SSL ì¸ì¦ì„œ ì„¤ì •
    ssl_certificate /etc/letsencrypt/live/i12d202.p.ssafy.io/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/i12d202.p.ssafy.io/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

    # React/Vue ë¹Œë“œ íŒŒì¼ë“¤ì´ ìœ„ì¹˜í•œ ë””ë ‰í† ë¦¬ ì§€ì •
    root /usr/share/nginx/html;
    # ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•  íŒŒì¼ ì§€ì •
    index index.html;

    # ğŸ‘‡ SPA ë¼ìš°íŒ…ì„ ìœ„í•œ í•µì‹¬ ì„¤ì •
    location / {
        # try_files ì§€ì‹œì–´ëŠ” ë‹¤ìŒ ìˆœì„œë¡œ íŒŒì¼ì„ ì°¾ìŒ:
        # 1. $uri : ìš”ì²­ëœ URLê³¼ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” íŒŒì¼ ì°¾ê¸° (ì˜ˆ: /about)
        # 2. $uri/ : ìš”ì²­ëœ URLê³¼ ì¼ì¹˜í•˜ëŠ” ë””ë ‰í† ë¦¬ ì°¾ê¸° (ì˜ˆ: /about/)
        # 3. /index.html : ìœ„ ë‘˜ ë‹¤ ì—†ìœ¼ë©´ index.htmlë¡œ í´ë°±(fallback)
        #
        # ì˜ˆì‹œ:
        # /about ì ‘ì† ì‹œ â†’ about íŒŒì¼ ì—†ìŒ â†’ about/ ë””ë ‰í† ë¦¬ ì—†ìŒ â†’ index.html ì œê³µ
        # â†’ React/Vueê°€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¼ìš°íŒ… ì²˜ë¦¬
        try_files $uri $uri/ /index.html;
    }

    # ğŸ‘‡ 404 ì—ëŸ¬ ì²˜ë¦¬ (ìœ„ì˜ try_filesì™€ í•¨ê»˜ ë™ì‘)
    # ë‹¤ë¥¸ ëª¨ë“  HTTP ì—ëŸ¬ë„ index.htmlë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ë ¤ë©´ ì•„ë˜ì²˜ëŸ¼ ì„¤ì •
    error_page 404 =200 /index.html;
    # =200ì€ 404 ëŒ€ì‹  200 ìƒíƒœì½”ë“œë¥¼ ë°˜í™˜í•˜ë„ë¡ í•¨
    # ì´ë ‡ê²Œ í•˜ë©´ ë¸Œë¼ìš°ì €ì—ì„œ 404 ì—ëŸ¬ ëŒ€ì‹  ì •ìƒ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬
}
